name: ğŸ‰ í•™ìŠµ ì™„ë£Œ ì¶•í•˜

on:
  pull_request:
    types: [opened]
    paths:
      - '**/*.md'
      - '!README.md'
      - '!.github/**'

permissions:
  pull-requests: write
  issues: write

jobs:
  congratulate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: ì¶•í•˜ ëŒ“ê¸€ ì¶”ê°€
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const author = context.payload.pull_request.user.login;
            const prNumber = context.payload.pull_request.number;
            
            // PRì—ì„œ ë³€ê²½ëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
            const { data: files } = await github.rest.pulls.listFiles({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: prNumber,
            });
            
            // ë§ˆí¬ë‹¤ìš´ íŒŒì¼ í•„í„°ë§ (README, .github ì œì™¸)
            const mdFiles = files.filter(file => 
              file.filename.endsWith('.md') && 
              !file.filename.includes('README.md') && 
              !file.filename.includes('.github/')
            );
            
            const fileCount = mdFiles.length;
            
            // ëœë¤ ì¶•í•˜ ë©”ì‹œì§€
            const messages = [
              `ğŸ‰ @${author}ë‹˜ì˜ í•™ìŠµ ë…¸íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`,
              `âœ¨ @${author}ë‹˜, ë©‹ì§„ í•™ìŠµ ë‚´ìš© ê°ì‚¬í•©ë‹ˆë‹¤!`,
              `ğŸš€ @${author}ë‹˜ì˜ ì—´ì •ì ì¸ í•™ìŠµì— ë°•ìˆ˜ë¥¼!`,
              `ğŸ“š @${author}ë‹˜, ì˜¤ëŠ˜ë„ í•œ ê±¸ìŒ ì„±ì¥í•˜ì…¨ë„¤ìš”!`,
              `ğŸ’ª @${author}ë‹˜ì˜ ê¾¸ì¤€í•œ í•™ìŠµ, ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤!`,
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            
            const comment = `${randomMessage}
            
ğŸ“ **ì¶”ê°€ëœ íŒŒì¼**: ${fileCount}ê°œ
${mdFiles.map(f => `- \`${f.filename}\``).join('\n')}

ìŠ¤í„°ë””ì› ì—¬ëŸ¬ë¶„ë„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ‘€`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body: comment
            });
            
            // PRì— ë¦¬ì•¡ì…˜ ì¶”ê°€
            await github.rest.reactions.createForIssue({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              content: 'rocket'
            });

