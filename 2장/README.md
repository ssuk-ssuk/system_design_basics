# 2장: 개략적인 규모 추정 (Back-of-the-envelope Estimation)

이 챕터는 시스템 설계 시 하드웨어 자원이나 성능 요구사항을 논리적 가정을 통해 대략적으로 계산해 보는 방법론을 다룹니다. 실무에서 설계를 구체화하기 전, 시스템의 규모를 파악하는 기초 역량을 기르는 과정입니다.

## ⏱️ 응답 지연(Latency) 수치

시스템 성능을 예측하기 위해 기본적으로 인지해야 할 하드웨어 및 네트워크 지연 시간 값들입니다.

- **메모리 및 CPU:** L1/L2 캐시 참조, 분기 예측 오류, 뮤텍스 락/언락, 주 메모리 참조.

- **데이터 전송:** 1KB 압축(Zippy), 1Gbps 네트워크를 통한 2KB 전송, 메모리에서의 1MB 순차 읽기.

- **네트워크 및 디스크:** 동일 데이터 센터 내 메시지 왕복, 디스크 탐색(Seek), 네트워크 및 디스크에서의 1MB 순차 읽기, 대륙 간(CA~네덜란드) 패킷 왕복 지연.

## 🛡️ 고가용성 (High Availability)

시스템이 중단 없이 지속적으로 운영될 수 있는 능력을 의미하며, 보통 '9'의 개수로 표시합니다. 이는 서비스 사업자와 고객 간의 합의인 SLA(Service Level Agreement)의 핵심 기준이 됩니다.

| 가용률       | 하루당 장애 시간 | 연간 장애 시간 |
| ------------ | ---------------- | -------------- |
| **99%**      | 14.40분          | 3.65일         |
| **99.9%**    | 1.44분           | 8.77시간       |
| **99.99%**   | 8.64초           | 52.60분        |
| **99.999%**  | 864ms            | 5.26분         |
| **99.9999%** | 86.40ms          | 31.56초        |

---

## 📊 실전 추정 연습: 트위터 규모 추정

파일에서 다룬 트위터 사례를 통해 요구량을 계산하는 프로세스입니다.

### 1. 기본 가정 설정

- 월간 능동 사용자(MAU): 3억 명.

- 일간 능동 사용자(DAU): 전체의 50%인 1.5억 명.

- 사용자 행동: 매일 평균 2건의 트윗 작성, 그중 10%는 미디어 포함.

- 보관 주기: 모든 데이터는 5년간 보관.

### 2. QPS (Query Per Second) 추정

- **평균 QPS:** .

- **최대(Peak) QPS:** 평균의 2배인 약 7,000.

### 3. 저장소 요구량 추정

- **트윗 구성:** ID(64B), 텍스트(140B), 미디어(1MB).

- **미디어 저장소:** 일일 발생량 (건의 미디어).

- **5년 보관 총량:** 약 55PB ().
